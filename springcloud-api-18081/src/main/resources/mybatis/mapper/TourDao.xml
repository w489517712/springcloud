<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wxm.springcloud.tour.dao.TourDao">
    <insert id="save" >
            insert into  v_tour_info
            (name,money,lev,remark,setmeal,pngurl,contry)
            values
            (
            #{name},
            #{money},
            #{lev},
            #{remark},
            #{setmeal},
            #{pngurl},
            #{contry}

            )
    </insert>
    <select  id="queryList" resultType="com.wxm.springcloud.tour.po.Tour" >
          select *  from  v_tour_info t
          where 1=1
          <if test="id != null and id !=''">
              and  t.id = #{id}
          </if>

          <if test="tn != null and tn !=''">
              limit #{rn} , #{tn}
          </if>

    </select>
    <select  id="queryListTotal" resultType="int" >
        select count(*) from  v_tour_info t
        where 1=1
        <if test="id != null and id !=''">
            and  t.id = #{id}
        </if>
    </select>
    <select  id="checkLoginInfo" resultType="com.wxm.springcloud.tour.po.User" >
          select
            id,
            name,
            password passWord,
            token

            from v_user  where name = #{name} and password = #{password}
    </select>

    <update id="updateUserToken">

        update v_user set token = #{value}

    </update>


</mapper>